/*!
 * remark (http://getbootstrapadmin.com/remark)
 * Copyright 2015 amazingsurge
 * Licensed under the Themeforest Standard Licenses
 */
!function(document,window,$){"use strict";window.AppMessage=App.extend({scrollChatsToBottom:function(){var $chatsWrap=$(".app-message-chats"),chatsWrapH=$chatsWrap.height(),chatsH=$(".chats",$chatsWrap).outerHeight(),historyBtnH=$("#historyBtn").outerHeight();$chatsWrap.scrollTop(chatsH+historyBtnH-chatsWrapH)},handleResize:function(){var self=this;$(window).on("resize",function(){self.scrollChatsToBottom()})},handleTalking:function(){var self=this,$chatsWrap=$(".app-message-chats"),$textarea=$(".message-input textarea"),$textareaWrap=$(".app-message-input");autosize($(".message-input textarea")),$textarea.on("autosize:resized",function(){var height=$textareaWrap.outerHeight();$chatsWrap.css("height","calc(100% - "+height+"px)"),self.scrollChatsToBottom()}),$(".message-input-btn>button").on("click",function(){var talkContents=$(".message-input>.form-control").val(),$newMsg=$("<div class='chat-content'><p>"+talkContents+"</p></div>");talkContents.length>0?($(".chat").last().find(".chat-body").append($newMsg),$(".message-input>.form-control").attr("placeholder",""),$(".message-input>.form-control").val("")):$(".message-input>.form-control").attr("placeholder","type text here..."),$(".message-input>.form-control").focus(),self.scrollChatsToBottom()})},run:function(next){this.scrollChatsToBottom(),this.handleResize(),this.handleTalking()}}),$(document).ready(function($){AppMessage.run()})}(document,window,jQuery);